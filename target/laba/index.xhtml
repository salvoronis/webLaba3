<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html" 
  xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:ace="http://www.icefaces.org/icefaces/components"
  xmlns:p="http://primefaces.org/ui">
  <h:head>
    <title>Page</title>
    <h:outputStylesheet library="css" name="style.css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
  </h:head>
  <h:body>
    <svg id="fuck" version="1.2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="graph" aria-labelledby="title" role="img">
        <title id="title">jsf очень больно</title>
        <g class="grid x-grid" id="xGrid">
          <line id="yline" x1="270" x2="270" y1="20" y2="520"></line>
          <polygon id="ytrig" points="270,0 265,20 275,20" stroke="#acb299" fill="#acb299"></polygon>
        </g>
        <g class="grid y-grid" id="yGrid">
          <line fill="black" id="xline" x1="20" x2="520" y1="270" y2="270"></line>
          <polygon id="xtrig" points="520,265 520,275 540,270" stroke="#acb299" fill="#acb299"></polygon>
        </g>
        <g class="labels x-labels">
          <text class="xpoint" x="#{270-labaBean.radius*50}" y="270">-#{labaBean.radius}</text>
          <text class="xpoint" x="#{270-labaBean.radius*25}" y="270">-#{labaBean.radius}/2</text>
          <text class="xpoint" x="270" y="270">0</text>
          <text class="xpoint" x="#{270+labaBean.radius*25}" y="270">#{labaBean.radius}/2</text>
          <text class="xpoint" x="#{270+labaBean.radius*50}" y="270">#{labaBean.radius}</text>
          <text id="xp" x="430" y="265" class="label-title">x</text>
        </g>
        <g class="labels y-labels">
          <text class="ypoint" x="270" y="#{270-labaBean.radius*50}">#{labaBean.radius}</text>
          <text class="ypoint" x="270" y="#{270-labaBean.radius*25}">#{labaBean.radius}/2</text>
          <text class="ypoint" x="270" y="270"></text>
          <text class="ypoint" x="270" y="#{270+labaBean.radius*25}">-#{labaBean.radius}/2</text>
          <text class="ypoint" x="270" y="#{270+labaBean.radius*50}">-#{labaBean.radius}</text>
          <text id="yp" x="270" y="10" class="label-title">y</text>
        </g>
        <g class="data" data-setname="Our first data set">
          <rect class="meichu" x="270" y="270" width="#{labaBean.radius*50}" height="#{labaBean.radius*25}"/>
          <polygon id="triangle" class="meichu" points="270,270 #{labaBean.radius*50+270},270 270,#{270-labaBean.radius*25}"></polygon>
          <path class="meichu" d="M #{270-labaBean.radius*25} 270 A 90 90, 0, 0, 0, 270 #{270+labaBean.radius*25} L 270 270 Z"></path>
        </g>
      </svg>

    <h:form>
      <p:remoteCommand name="fuckingImg" update="tablePanel" actionListener="#{labaBean.imgListener}"/>

      <h:outputLabel for="sliderx" value="x"/>
      <ace:sliderEntry id="sliderx" 
        axis="x" 
        clickableRail="true"
        length="150"
        min="-2"
        max="2"
        stepPercent="25"
        showLabels="true"
        value="#{labaBean.menuItem.slider}">
      </ace:sliderEntry>
      <br/>
      <h:outputLabel for="ytext" value="y"/>
      <h:inputText id="ytext" value="#{labaBean.menuItem.input}">
        <f:validator validatorId="textValidator"/>
        <f:validateLength minimum="1" maximum="2"/>
      </h:inputText>
      <h:outputLabel for="selectr" value="r"/>
      <h:selectOneMenu id="selectr" value="#{labaBean.radius}" valueChangeListener="#{labaBean.change}" onchange="renderImg(this.value)"> 
        <f:selectItem itemValue="1" itemLabel="1"/> 
        <f:selectItem itemValue="1.5" itemLabel="1.5"/>
        <f:selectItem itemValue="2" itemLabel="2"/> 
        <f:selectItem itemValue="2.5" itemLabel="2.5"/> 
        <f:selectItem itemValue="3" itemLabel="3"/>
      </h:selectOneMenu>
      <h:commandButton value="Check" action="#{labaBean.addItem()}">
        <p:ajax execute="@form" update="tablePanel"/>
      </h:commandButton>
    </h:form>

    <p:panel id="tablePanel" rendered="true">
      <h:dataTable id="sukablad" value="#{labaBean.items}" var="point">
        <h:column>
          <f:facet name="header">X</f:facet>
          #{point.x}
        </h:column>
        <h:column>
          <f:facet name="header">Y</f:facet>
          #{point.y}
        </h:column>
        <h:column>
          <f:facet name="header">R</f:facet>
          #{point.r}
        </h:column>
        <h:column>
          <f:facet name="header">Результат</f:facet>
          #{point.result}
        </h:column>
      </h:dataTable>
    </p:panel>
  </h:body>
  <h:outputScript library="js" name="script.js"/>
  <h:outputScript library="js" name="forms.js"/>
</html>